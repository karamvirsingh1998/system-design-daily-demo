<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding DNS-Based Service Discovery</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
        }
        .explanation {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.8;
            color: #555;
        }
        h2 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .component-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        .component-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        .steps-container {
            margin: 20px 0;
        }
        .step {
            background: #f0f0f0;
            margin: 10px 0;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .step:hover {
            background: #e8e8e8;
            transform: translateX(5px);
        }
        .step.active {
            background: #e3e8ff;
            border-left-color: #764ba2;
        }
        .step-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 15px;
            font-weight: bold;
        }
        .diagram-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid #667eea;
            min-height: 400px;
            position: relative;
        }
        #diagramCanvas {
            width: 100%;
            height: 400px;
            border-radius: 10px;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            margin: 0 10px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        button:active {
            transform: scale(0.98);
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #999;
        }
        .info-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Understanding DNS-Based Service Discovery</h1>
        
        <!-- Beginner Introduction -->
        <div class="explanation" style="background: #e3f2fd; border-left: 4px solid #2196f3;">
            <strong style="color: #1976d2; font-size: 1.1em;">üéØ Getting Started:</strong>
            <p style="margin-top: 10px;">Service discovery is a way for applications to find and communicate with each other easily in a network. DNS-based service discovery uses Domain Name System (DNS) to register and locate services.</p>
        </div>
        
        <!-- Story Example -->
        <h2>üìñ Real-World Story</h2>
        <div class="explanation" style="background: #fff3e0; border-left: 4px solid #ff9800;">
            <h3 style="color: #e65100; margin-bottom: 10px;">Finding a Restaurant in a Big City</h3>
            <p>Imagine you're in a big city and looking for a restaurant. Instead of wandering around, you use a map app that shows you all the nearby restaurants. Each restaurant has its name and address, making it easy for you to find and visit them. Similarly, in a network, services register their 'names' and 'addresses' so that other services can find them easily and communicate.</p>
        </div>
        
        <!-- Progressive Learning -->
        <h2>üìö Learning Path: From Basics to Advanced</h2>
        
        <div class="progressive-level" style="margin: 20px 0; padding: 20px; border-radius: 10px; background: #f3e5f5; border-left: 4px solid #9c27b0;">
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <span style="background: #9c27b0; color: white; padding: 5px 15px; border-radius: 20px; font-weight: bold; margin-right: 15px;">
                    Beginner
                </span>
                <h3 style="margin: 0; color: #333;">What is DNS?</h3>
            </div>
            <p style="margin: 10px 0; line-height: 1.8;">DNS stands for Domain Name System. It translates human-friendly domain names (like www.example.com) into IP addresses that computers use.</p>
            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                <strong>üí° Example:</strong> When you type a website name in your browser, DNS finds the corresponding IP address to connect you to that website.
            </div>
        </div>
        
        <div class="progressive-level" style="margin: 20px 0; padding: 20px; border-radius: 10px; background: #e8f5e9; border-left: 4px solid #4caf50;">
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <span style="background: #4caf50; color: white; padding: 5px 15px; border-radius: 20px; font-weight: bold; margin-right: 15px;">
                    Intermediate
                </span>
                <h3 style="margin: 0; color: #333;">Service Registration with DNS</h3>
            </div>
            <p style="margin: 10px 0; line-height: 1.8;">In a network, services need to register themselves with DNS. This registration includes their names and addresses.</p>
            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                <strong>üí° Example:</strong> If a new restaurant opens, it registers its name and address with a city directory so that people can find it easily.
            </div>
        </div>
        
        <div class="progressive-level" style="margin: 20px 0; padding: 20px; border-radius: 10px; background: #fff3e0; border-left: 4px solid #ff9800;">
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <span style="background: #ff9800; color: white; padding: 5px 15px; border-radius: 20px; font-weight: bold; margin-right: 15px;">
                    Advanced
                </span>
                <h3 style="margin: 0; color: #333;">Service Discovery Process</h3>
            </div>
            <p style="margin: 10px 0; line-height: 1.8;">When an application needs to communicate with another service, it queries DNS to get the service's address. This process allows applications to discover and connect to services dynamically.</p>
            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                <strong>üí° Example:</strong> When an app needs to access a payment service, it queries DNS to find out where the payment service is located and establishes a connection.
            </div>
        </div>
        
        
        <h2>üß© Key Components</h2>
        <div class="components-grid">
            
        </div>
        
        <h2>‚öôÔ∏è How It Works</h2>
        <div class="steps-container" id="stepsContainer">
            <div class="step" data-step="0"><span class="step-number">1</span>Service registers itself with DNS</div><div class="step" data-step="1"><span class="step-number">2</span>Client queries DNS for the service address</div><div class="step" data-step="2"><span class="step-number">3</span>Client connects to the service using the address</div>
        </div>
        
        <!-- Dynamic UI Examples -->
        <h2>üé® Interactive UI Demonstrations</h2>
        <div style="margin: 20px 0;">
            <p style="margin-bottom: 20px; color: #666;">These UI examples are dynamically generated at runtime based on this topic's structure:</p>
            
            <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; margin: 15px 0; border: 2px solid #667eea;">
                <h3 style="color: #667eea; margin-bottom: 10px;">Service Discovery UI Demo</h3>
                <p style="margin: 10px 0; line-height: 1.6;">This UI demo would show how a client discovers services through DNS.</p>
                <div style="margin-top: 15px;">
                    <strong>What it demonstrates:</strong> The process of querying DNS and displaying available services.
                </div>
                <div style="margin-top: 10px;"><strong>Interactive elements:</strong> search_box, service_list</div>
            </div>
            
        </div>
        
        <h2>Interactive Diagram</h2>
        <div class="controls">
            <button onclick="animateDiagram()">Animate Flow</button>
            <button onclick="resetDiagram()">Reset</button>
            <button onclick="highlightStep()">Highlight Current Step</button>
        </div>
        <div class="diagram-container">
            <canvas id="diagramCanvas"></canvas>
        </div>
        
        <div class="footer">
            Generated on 2026-01-11 16:11:15
        </div>
    </div>
    
    <script>
        const diagramData = {"nodes": [{"id": "dns_server", "label": "DNS Server", "type": "server"}, {"id": "service_registry", "label": "Service Registry", "type": "server"}, {"id": "client_app", "label": "Client Application", "type": "client"}], "connections": [{"from": "service_registry", "to": "dns_server", "label": "registers service"}, {"from": "client_app", "to": "dns_server", "label": "queries service"}], "flow_direction": "top-to-bottom"};
        const stepsData = ["Service registers itself with DNS", "Client queries DNS for the service address", "Client connects to the service using the address"];
        const animationsData = {"description": "Animations will visually demonstrate the service registration and discovery process.", "sequences": [{"name": "Service Registration Animation", "description": "Shows how a service registers with the DNS server.", "duration": 3000, "steps": [{"action": "highlight", "target": "service_registry", "effect": "pulse", "duration": 500}, {"action": "draw_path", "from": "service_registry", "to": "dns_server", "effect": "fade-in", "duration": 1000}, {"action": "highlight", "target": "dns_server", "effect": "glow", "duration": 500}]}, {"name": "Client Queries Animation", "description": "Demonstrates a client querying the DNS for a service.", "duration": 3000, "steps": [{"action": "highlight", "target": "client_app", "effect": "pulse", "duration": 500}, {"action": "draw_path", "from": "client_app", "to": "dns_server", "effect": "flow", "duration": 1000}, {"action": "highlight", "target": "dns_server", "effect": "glow", "duration": 500}]}], "interactive_behaviors": [{"trigger": "click", "target": "client_app", "action": "highlight_diagram_node", "feedback": "The client application is highlighted to show where the service query starts."}]};
        const canvas = document.getElementById('diagramCanvas');
        const ctx = canvas.getContext('2d');
        let animationFrame = null;
        let currentStep = 0;
        let animationTime = 0;
        
        // Set canvas size
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = 400;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Node positions and states
        let nodes = [];
        let connections = diagramData.connections || [];
        const nodeRadius = 40;
        const nodeColors = {
            'server': '#667eea',
            'client': '#48bb78',
            'database': '#f56565',
            'cache': '#ed8936',
            'queue': '#9f7aea',
            'default': '#718096'
        };
        
        // Initialize node positions
        function initNodes() {
            const nodes_data = diagramData.nodes || [];
            const flowDir = diagramData.flow_direction || 'left-to-right';
            const cols = Math.ceil(Math.sqrt(nodes_data.length));
            const rows = Math.ceil(nodes_data.length / cols);
            
            nodes = nodes_data.map((node, i) => {
                let x, y;
                if (flowDir === 'left-to-right') {
                    x = 150 + (i % cols) * 200;
                    y = 100 + Math.floor(i / cols) * 150;
                } else {
                    x = 100 + (i % cols) * 180;
                    y = 150 + Math.floor(i / cols) * 120;
                }
                return {
                    ...node,
                    x: x,
                    y: y,
                    highlighted: false,
                    pulse: 0
                };
            });
        }
        
        // Draw diagram
        function drawDiagram(highlightedNode = null, animatedConn = null) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw connections
            connections.forEach((conn, i) => {
                const fromNode = nodes.find(n => n.id === conn.from);
                const toNode = nodes.find(n => n.id === conn.to);
                if (!fromNode || !toNode) return;
                
                const isAnimated = animatedConn === i;
                ctx.strokeStyle = isAnimated ? '#764ba2' : '#cbd5e0';
                ctx.lineWidth = isAnimated ? 3 : 2;
                ctx.beginPath();
                ctx.moveTo(fromNode.x, fromNode.y);
                ctx.lineTo(toNode.x, toNode.y);
                ctx.stroke();
                
                // Draw arrow
                const angle = Math.atan2(toNode.y - fromNode.y, toNode.x - fromNode.x);
                const arrowX = toNode.x - (nodeRadius + 5) * Math.cos(angle);
                const arrowY = toNode.y - (nodeRadius + 5) * Math.sin(angle);
                ctx.fillStyle = isAnimated ? '#764ba2' : '#cbd5e0';
                ctx.beginPath();
                ctx.moveTo(arrowX, arrowY);
                ctx.lineTo(arrowX - 10 * Math.cos(angle - Math.PI/6), arrowY - 10 * Math.sin(angle - Math.PI/6));
                ctx.lineTo(arrowX - 10 * Math.cos(angle + Math.PI/6), arrowY - 10 * Math.sin(angle + Math.PI/6));
                ctx.closePath();
                ctx.fill();
            });
            
            // Draw nodes
            nodes.forEach(node => {
                const isHighlighted = highlightedNode === node.id || node.highlighted;
                const color = nodeColors[node.type] || nodeColors.default;
                const pulse = node.pulse || 0;
                
                // Outer glow for highlighted
                if (isHighlighted) {
                    ctx.shadowBlur = 20;
                    ctx.shadowColor = color;
                } else {
                    ctx.shadowBlur = 0;
                }
                
                // Draw node
                ctx.fillStyle = color;
                ctx.beginPath();
                const radius = nodeRadius + pulse * 5;
                ctx.arc(node.x, node.y, radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw border
                ctx.strokeStyle = isHighlighted ? '#764ba2' : '#fff';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // Draw label
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 12px sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(node.label, node.x, node.y);
            });
        }
        
        // Enhanced animation system using API specifications
        function animateDiagram() {
            if (animationFrame) {
                cancelAnimationFrame(animationFrame);
            }
            
            const sequences = animationsData.sequences || [];
            if (sequences.length === 0) {
                // Fallback to default animation
                let connIndex = 0;
                function animate() {
                    drawDiagram(null, connIndex);
                    connIndex = (connIndex + 1) % connections.length;
                    animationFrame = setTimeout(() => {
                        animationFrame = requestAnimationFrame(animate);
                    }, 1000);
                }
                animate();
                setTimeout(() => {
                    if (animationFrame) {
                        cancelAnimationFrame(animationFrame);
                        animationFrame = null;
                    }
                    drawDiagram();
                }, 5000);
                return;
            }
            
            // Execute animation sequences from API
            let currentSequence = 0;
            let currentStep = 0;
            let sequenceTimeout = null;
            
            function executeSequence() {
                if (currentSequence >= sequences.length) {
                    drawDiagram();
                    return;
                }
                
                const seq = sequences[currentSequence];
                const steps = seq.steps || [];
                
                if (currentStep >= steps.length) {
                    currentSequence++;
                    currentStep = 0;
                    setTimeout(executeSequence, 300);
                    return;
                }
                
                const step = steps[currentStep];
                const targetNode = nodes.find(n => n.id === step.target);
                
                // Execute animation step
                if (step.action === 'highlight' && targetNode) {
                    if (step.effect === 'pulse') {
                        let pulseCount = 0;
                        const pulseInterval = setInterval(() => {
                            targetNode.pulse = Math.sin(pulseCount * 0.5) * 5;
                            drawDiagram(step.target);
                            pulseCount++;
                            if (pulseCount > 20) {
                                clearInterval(pulseInterval);
                                targetNode.pulse = 0;
                            }
                        }, 50);
                    } else if (step.effect === 'glow') {
                        targetNode.highlighted = true;
                        drawDiagram(step.target);
                    }
                } else if (step.action === 'draw_path') {
                    const fromNode = nodes.find(n => n.id === step.from);
                    const toNode = nodes.find(n => n.id === step.to);
                    if (fromNode && toNode) {
                        const connIndex = connections.findIndex(c => c.from === step.from && c.to === step.to);
                        if (connIndex >= 0) {
                            drawDiagram(null, connIndex);
                        }
                    }
                }
                
                currentStep++;
                sequenceTimeout = setTimeout(executeSequence, step.duration || 500);
            }
            
            executeSequence();
        }
        
        // Reset diagram
        function resetDiagram() {
            if (animationFrame) {
                cancelAnimationFrame(animationFrame);
                animationFrame = null;
            }
            nodes.forEach(n => {
                n.highlighted = false;
                n.pulse = 0;
            });
            currentStep = 0;
            drawDiagram();
        }
        
        // Highlight step
        function highlightStep() {
            const stepElement = document.querySelector(`.step[data-step="${currentStep}"]`);
            if (stepElement) {
                document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
                stepElement.classList.add('active');
                
                // Pulse effect on nodes
                nodes.forEach(n => {
                    n.pulse = 0;
                });
                
                let pulseCount = 0;
                const pulseInterval = setInterval(() => {
                    nodes.forEach(n => {
                        n.pulse = Math.sin(pulseCount * 0.5) * 3;
                    });
                    drawDiagram();
                    pulseCount++;
                    if (pulseCount > 20) {
                        clearInterval(pulseInterval);
                        nodes.forEach(n => {
                            n.pulse = 0;
                        });
                        drawDiagram();
                    }
                }, 50);
                
                currentStep = (currentStep + 1) % stepsData.length;
            }
        }
        
        // Step click handlers
        document.querySelectorAll('.step').forEach((stepEl, i) => {
            stepEl.addEventListener('click', () => {
                currentStep = i;
                highlightStep();
            });
        });
        
        // Component card click handlers
        document.querySelectorAll('.component-card').forEach((card, i) => {
            card.addEventListener('click', () => {
                if (i < nodes.length) {
                    nodes[i].highlighted = !nodes[i].highlighted;
                    drawDiagram();
                }
            });
        });
        
        // Initialize
        initNodes();
        drawDiagram();
    </script>
</body>
</html>